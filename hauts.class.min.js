/*!
 * Hauts.Class
 *
 * Copyright 2015 Michael Chistyakov | Hauts | http://hauts.ru
 *
 * https://github.com/Hauts/Hauts.Class
 */
;(function(w){function O(a,b){P?console.log(b[0],a):X?console.log("%c"+a,b[1]):console.log(a)}function h(a,b,c){if(Q)if(D){c=k(c)?c:0;for(var d="";c--;)d+="\t";if(R)O(d+"Hauts.Class: "+a,b);else{try{O(d+"Hauts.Class: "+a,b)}catch(e){Q=!1}R=!0}}else E.push([a,b])}function r(a,b){return h(a,l.LOG,b)}function A(a,b){return h(a,l.MARK,b)}function k(a){return"undefined"!=typeof a&&null!=a}function q(a){return"function"==typeof a}function Y(a){return F?eval("new function "+a+"(){}"):new function(){}}function G(a,
b){for(var c in a)b[c]=a[c]}function J(a){return"superClass"==a||"extend"==a||"instanceOf"==a||"className"==a}function Z(a){function b(a){a.superClass&&a.superClass!==v&&(c.push(a.superClass),b(a.superClass))}var c=[];b(a);c.reverse();c.push(a);return c}function S(){B=[];for(var a=H.length,b=t.length,c=0;c<a;c++){var d=H[c];if(d&&!d.resolved){for(var e=[],f=d.dependencies,k=f.length,n=0,p=[],h=0;h<k;h++){for(var l=f[h],m=!1,u=0;u<b;u++){var g=t[u];g.defined&&g.objectPath==l&&(n++,p.push(g.result),
m=!0)}m||e.push(l)}n==k?(d.resolved=!0,A("Launching resolve for '"+f.join("', '")+"'"),e=d.handler,d=d.context,q(e)&&e.apply(d,p),H.splice(c,1),--c):B.push({emptyDependencies:e})}}}function T(){C=[];for(var a=t.length,b=0;b<a;b++){var c=t[b];if(!c.defined){for(var d=[],e=0,f=c.dependencies,x=f.length,a=t.length,n=[],p=0;p<x;p++){for(var r=f[p],v=!1,m=0;m<a;m++){var u=t[m],g=u.objectPath;u.defined&&g==r&&(e++,n.push(u.result),v=!0)}v||d.push(r)}e==x?(c.defined=!0,A("Resolved definition for '"+c.objectPath+
"'"),c.targetPath[c.objectName]&&h(c.objectPath+" already defined!",l.ERROR,void 0),d=c.handler,e=w,n=q(d)?d.apply(e,n):null,k(n)||h("Define handler for "+c.objectPath+" does not return anything",l.WARN,void 0),c.result=c.targetPath[c.objectName]=n,S(),T()):C.push({objectPath:c.objectPath,emptyDependencies:d})}}}var U={},v=Object,I=!0,F=!1,K=[],L=0,M=!1,P=!("undefined"===typeof module||!module.exports),D=!1,V=!1,Q=!0,R=!1,E=[],l={LOG:["\u001b[1m%s\u001b[0m","color:#999999;font-size:11px;font-style:italic;"],
ERROR:["\u001b[31m%s\u001b[0m","color:#FF0000;font-size:11px;font-style:italic;"],WARN:["\u001b[43m%s\u001b[0m","color:#FF7700;font-size:11px;font-style:italic;"],MARK:["\u001b[42m%s\u001b[0m","color:#009900;font-size:11px;font-style:italic;"]},X=!("undefined"===typeof window||!window.chrome),f=function(a,b,c,d,e){return f.create(a,b,c,d,e)};f.create=function(a,b,c,d,e){return f.extend(null,a,b,c,d,e)};f.useDeepMode=function(a){k(a)&&(I=!!a);return I};f.useEval=function(a){k(a)&&(F=!!a);return F};
f.debug=function(a){k(a)&&(D=!!a);if(D&&(V||(V=!0,A("v.1.17 [13.11.2015]\n\n")),a=E.length,0<a)){r("// Start of cached",0);for(var b=0;b<a;b++){var c=E[b];h(c[0],c[1],1)}E=[];r("// End of cached",0)}return D};f.toggleDebug=function(){return f.debug(!f.debug())};f.extend=function(a,b,c,d,e,h){function l(a,b,c){var d=!1,e=function(){if(!d){d=!0;var g=m;m=!0;var f=a.superClass;a.superClass=b.superClass.superClass;for(var h=arguments.length,k=Array(h),l=0;l<h;l++)k[l]=arguments[l];c.apply(a,k);a.superClass=
f;g||(m=!1)}return e};e.className=c.className;return e}function n(a){function b(c,d,e){e=function(){var b=m;m=!0;var e=a.superClass;a.superClass=d;for(var g=arguments.length,f=Array(g),h=0;h<g;h++)f[h]=arguments[h];g=c.apply(a,f);a.superClass=e;b||(m=!1);return g};e.isInherited=!!c.isInherited;return e}function c(a,d,e){for(var g in d)if(!J(g)){var f=d[g];q(f)&&(a[g]=b(f,e,g))}}for(var d=Z(a),e=1,g=d.length,f=[];e<g;e++)f.push(l(a,d[e],d[e-1]));e=1;for(g=f.length;e<g;e++)f[e].superClass=f[e-1];for(e=
g-1;0<=e;e--)c(f[e],d[e].prototype,f[e-1]);a.superClass=f[g-1]||new function(){};u=f[g-1]}function p(a){function b(a,c){if(a.isWrapper)return a;var d=function(){m&&(c.superClass=u);for(var b=arguments.length,d=Array(b),e=0;e<b;e++)d[e]=arguments[e];return a.apply(c,d)};d.isWrapper=!0;d.isInherited=!!a.isInherited;return d}for(var c in a)if(!J(c)){var d=a[c];q(d)&&(a[c]=b(d,a))}}function t(a){return function(){m&&(this.superClass=u);for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];
return this.superClass[a].apply(this,c)}}a=q(a)?a:v;q(b)?(e=d,d=c,c=b,b="Class_"+ ++L):"string"==typeof b?q(c)||(e=d,d=c,c=v):"object"==typeof b?(e=d,d=b,c=v,b="Class_"+ ++L):k(b)||(b="Class_"+ ++L);if(!k(c))c=v;else if(!q(c))throw Error("classConstructor must be a Function");d=k(d)?d:U;e=k(e)?e:U;r("Creating Class "+b);var w=a.prototype,m=!1,u,g=function(){if(!M){n(this);p(this);for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];c.apply(this,b);p(this);return this}};if(F){var y=
g.toString().split("function"),y=y.shift()+"function "+b+y.join("function"),y="(function(){return "+y+"})()";try{g=eval(y)}catch(aa){throw Error("Could not eval class constructor function with source code: \n"+y);}}h=k(h)?!!h:I;I&&h?(M=!0,g.prototype=new a,M=!1):G(w,g.prototype);if(a!=v)for(var z in d)J(z)||!q(d[z])||k(d[z])||(d[z]=t(z),d[z].isInherited=!0);G(d,g.prototype);G(a,g);G(e,g);g.superClass=g.prototype.superClass=a;g.className=g.prototype.className=b;g.extend=g.prototype.extend=function(a,
b,c,d,e){return f.extend(g,a,b,c,d,e)};g.instanceOf=g.prototype.instanceOf=function(a){if(g===a)return!0;if(g.superClass){if(g.superClass===a)return!0;if(q(g.superClass.instanceOf))return g.superClass.instanceOf(a)}return!1};K.push(g);return g};f.isClass=function(a){if(!k(a))return!1;for(var b=K.length;b--;)if(a===K[b])return!0;return!1};f.isClassInstanceOfClass=function(a,b){return k(a)&&k(b)&&f.isClass(a)&&f.isClass(b)?a.instanceOf(b):!1};var C=[],B=[],H=[],t=[],N="";f.define=function(a,b,c){if("string"!=
typeof a)return h("No objectPath passed to define!",l.ERROR,void 0);N=a;var d=a.split("."),e=d.pop();if(""==e)return h("define must have objectPath (objectName) argument!",l.ERROR,void 0);q(b)&&(c=b,b=[]);if(!k(c))return h("No handler to define "+a+"!",l.ERROR,void 0);for(var f=d.length,x=w,n=0;n<f;n++){var p=d[n];""!=p&&(x[p]=x=x[p]||Y(p))}r("Added definition for '"+a+"'");t.push({defined:!1,objectPath:a,targetPath:x,objectName:e,dependencies:b,handler:c});T();return this};f.resolve=function(a,b,
c){if(q(a))if(c=b,b=a,N)a=[N];else{h("No dependencies for resolve",l.WARN,void 0);return}"[object Array]"!==Object.prototype.toString.call(a)&&(a=[a]);H.push({resolved:!1,dependencies:a,handler:b,context:k(c)?c:w});r("Added resolve handler to '"+a.join("', '")+"'");S();return this};f.isDefined=function(a){"[object Array]"!==Object.prototype.toString.call(a)&&(a=[a]);for(var b=a.length,c=t.length,d=0,e=0;e<c;e++){var f=t[e];if(f.defined)for(var h=0;h<b;h++)if(a[h]==f.objectPath&&(d++,d==b))return!0}return!1};
f.debugDefines=function(){var a=C.length;if(a){h("Empty definitions:",l.WARN,void 0);for(var b=0;b<a;b++){var c=C[b];r(c.objectPath);r("#"+(b+1)+"\t"+c.emptyDependencies.join(", "))}}else A("All definitions ok");if(a=B.length)for(h("Empty resolves:",l.WARN,void 0),b=0;b<a;b++)r("#"+(b+1)+"\t"+B[b].emptyDependencies.join(", "));else A("All resolves ok");return{emptyDefines:C,emptyResolves:B}};var W=w.Hauts=w.Hauts||new function(){};W.Class=f;P&&(module.exports=W)})("undefined"!==typeof module&&module.exports&&
"undefined"!==typeof global?global:this||window);