// Hauts.Class
// 27.10.2015
// Hauts
// https://github.com/Hauts/Hauts.Class
(function(x){function k(a){return"undefined"!=typeof a&&null!=a}function m(a){return typeof a==n}function L(a){return eval("new function "+a+"(){}")}function A(a,c){for(var d in a)c[d]=a[d]}function C(a){return"superClass"==a||"extend"==a||"instanceOf"==a||"className"==a}function M(a){function c(a){a.superClass&&a.superClass!==r&&(d.push(a.superClass),c(a.superClass))}var d=[];c(a);d.reverse();d.push(a);return d}function G(){for(var a=0,c=u.length,d=z.length;a<c;a++)for(var b=u[a],g=b.classPath,t=
0;t<d;t++){var l=z[t];if(!l.resolved&&l.classPath==g){var f=l.handler,p=[b.result],k=l.context;m(f)&&f.apply(k,p);l.resolved=!0}}}function H(){for(var a=v.length,c=0;c<a;c++){var d=v[c];if(!d.defined){for(var b=0,g=d.dependencies,f=g.length,l=u.length,k=[],p=0;p<f;p++)for(var r=g[p],n=0;n<l;n++){var q=u[n];q.classPath==r&&(b++,k.push(q.result))}b==f&&(d.defined=!0,b=d,g=d.targetPath,f=d.className,l=d.handler,k=m(l)?l.apply(null,k):null,b.result=g[f]=k,u.push(d),G(),H())}}}x.Hauts=x.Hauts||new function(){};
var I=x.Hauts;if(!m(I.Class)){var n="function",J={},r=Object,B=!0,D=[],E=0,F=!1,f=function(a,c,d,b,g){return f.create(a,c,d,b,g)};f.create=function(a,c,d,b,g){return f.extend(null,a,c,d,b,g)};f.useDeepMode=function(a){k(a)&&(B=!!a);return B};f.extend=function(a,c,d,b,g,t){function l(a,c,d){var b=!1,h=function(){if(!b){b=!0;var e=q;q=!0;var g=a.superClass;a.superClass=c.superClass.superClass;for(var f=arguments.length,k=Array(f),l=0;l<f;l++)k[l]=arguments[l];d.apply(a,k);a.superClass=g;e||(q=!1)}return h};
h.className=d.className;return h}function u(a){function c(d,b,f){f=function(){var c=q;q=!0;var f=a.superClass;a.superClass=b;for(var e=arguments.length,h=Array(e),g=0;g<e;g++)h[g]=arguments[g];e=d.apply(a,h);a.superClass=f;c||(q=!1);return e};f.isInherited=!!d.isInherited;return f}function d(a,b,f){for(var e in b)if(!C(e)){var h=b[e];m(h)&&(a[e]=c(h,f,e))}}for(var b=M(a),h=1,e=b.length,f=[];h<e;h++)f.push(l(a,b[h],b[h-1]));h=1;for(e=f.length;h<e;h++)f[h].superClass=f[h-1];for(h=e-1;0<=h;h--)d(f[h],
b[h].prototype,f[h-1]);a.superClass=f[e-1]||new function(){};v=f[e-1]}function p(a){function c(a,d){if(a.isWrapper)return a;var b=function(){q&&(d.superClass=v);for(var b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];return a.apply(d,c)};b.isWrapper=!0;b.isInherited=!!a.isInherited;return b}for(var d in a)if(!C(d)){var b=a[d];m(b)&&(a[d]=c(b,a))}}function x(a){return function(){q&&(this.superClass=v);for(var d=arguments.length,b=Array(d),c=0;c<d;c++)b[c]=arguments[c];return this.superClass[a].apply(this,
b)}}a=m(a)?a:r;m(c)?(g=b,b=d,d=c,c="Class_"+ ++E):"string"==typeof c?m(d)||(g=b,b=d,d=r):"object"==typeof c?(g=b,b=c,d=r,c="Class_"+ ++E):k(c)||(c="Class_"+ ++E);if(!k(d))d=r;else if(!m(d))throw Error("classConstructor must be a Function");b=k(b)?b:J;g=k(g)?g:J;var z=a.prototype,q=!1,v,e=function(){if(!F){u(this);p(this);for(var a=arguments.length,c=Array(a),b=0;b<a;b++)c[b]=arguments[b];d.apply(this,c);p(this);return this}},w=e.toString().split(n),w=w.shift()+n+" "+c+w.join(n),w="("+n+"(){return "+
w+"})()";try{e=eval(w)}catch(N){throw Error("Could not eval class constructor function with source code: \n"+w);}t=k(t)?!!t:B;B&&t?(F=!0,e.prototype=new a,F=!1):A(z,e.prototype);if(a!=r)for(var y in b)C(y)||!m(b[y])||k(b[y])||(b[y]=x(y),b[y].isInherited=!0);A(b,e.prototype);A(a,e);A(g,e);e.superClass=e.prototype.superClass=a;e.className=e.prototype.className=c;e.extend=e.prototype.extend=function(a,b,c,d,g){return f.extend(e,a,b,c,d,g)};e.instanceOf=e.prototype.instanceOf=function(a){if(e===a)return!0;
if(e.superClass){if(e.superClass===a)return!0;if(m(e.superClass.instanceOf))return e.superClass.instanceOf(a)}return!1};D.push(e);return e};f.isClass=function(a){if(!k(a))return!1;for(var c=D.length;c--;)if(a===D[c])return!0;return!1};f.isClassInstanceOfClass=function(a,c){return k(a)&&k(c)&&f.isClass(a)&&f.isClass(c)?a.instanceOf(c):!1};var z=[],v=[],u=[],K="";f.define=function(a,c,d){K=a;var b=a.split("."),f=b.pop();if(""==f)throw Error("Hauts.Class.define must have className argument");m(c)&&(d=
c,c=[]);for(var k=b.length,l=x,n=0;n<k;n++){var p=b[n];""!=p&&(l[p]=l=l[p]||L(p))}v.push({defined:!1,classPath:a,targetPath:l,className:f,dependencies:c,handler:d});H()};f.resolve=function(a,c,d){m(a)&&(d=c,c=a,a=K);z.push({resolved:!1,classPath:a,handler:c,context:d});G()};I.Class=f}})(this);