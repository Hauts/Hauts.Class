// Hauts.Class
// 22.10.2015
// Hauts
// https://github.com/Hauts/Hauts.Class
(function(q){function h(a){return"undefined"!=typeof a&&null!=a}function p(a){return"function"==typeof a}function K(a){return eval("new function "+a+"(){}")}function y(a,c){for(var d in a)c[d]=a[d]}function A(a){return"superClass"==a||"extend"==a||"instanceOf"==a||"className"==a}function L(a){function c(a){a.superClass&&a.superClass!==r&&(d.push(a.superClass),c(a.superClass))}var d=[];c(a);d.reverse();d.push(a);return d}function G(a,c){for(var d=0,b=t.length,f=B.length;d<b;d++)for(var u=t[d],g=u.classPath,
m=0;m<f;m++){var l=B[m];if(!l.resolved&&l.classPath==g){var h=l.handler,v=[u.result],n=l.context;p(h)&&h.apply(n,v);l.resolved=!0}}}function H(){for(var a=C.length,c=0;c<a;c++){var d=C[c];if(!d.defined){for(var b=0,f=d.dependencies,g=f.length,h=t.length,m=[],l=0;l<g;l++)for(var r=f[l],v=0;v<h;v++){var n=t[v];n.classPath==r&&(b++,m.push(n.result))}b==g&&(d.defined=!0,b=d,f=d.targetPath,g=d.className,h=d.handler,m=p(h)?h.apply(null,m):null,b.result=f[g]=m,t.push(d),G(),H())}}}q.Hauts=q.Hauts||new function(){};
var N=q.Hauts,I={},r=Object,z=!0,D=[],E=0,F=!1,g=function(a,c,d,b,f){return g.create(a,c,d,b,f)};g.create=function(a,c,d,b,f){return g.extend(null,a,c,d,b,f)};g.useDeepMode=function(a){h(a)&&(z=!!a);return z};g.extend=function(a,c,d,b,f,u){function M(a,d,c){var b=!1,k=function(){if(!b){b=!0;var e=n;n=!0;var f=a.superClass;a.superClass=d.superClass.superClass;for(var g=arguments.length,h=Array(g),l=0;l<g;l++)h[l]=arguments[l];c.apply(a,h);a.superClass=f;e||(n=!1)}return k};k.className=c.className;
return k}function m(a){function d(c,b,f){f=function(){var d=n;n=!0;var f=a.superClass;a.superClass=b;for(var e=arguments.length,k=Array(e),g=0;g<e;g++)k[g]=arguments[g];e=c.apply(a,k);a.superClass=f;d||(n=!1);return e};f.isInherited=!!c.isInherited;return f}function c(a,b,f){for(var e in b)if(!A(e)){var k=b[e];p(k)&&(a[e]=d(k,f,e))}}for(var b=L(a),k=1,e=b.length,f=[];k<e;k++)f.push(M(a,b[k],b[k-1]));k=1;for(e=f.length;k<e;k++)f[k].superClass=f[k-1];for(k=e-1;0<=k;k--)c(f[k],b[k].prototype,f[k-1]);
a.superClass=f[e-1]||new function(){};q=f[e-1]}function l(a){function c(a,d){if(a.isWrapper)return a;var b=function(){n&&(d.superClass=q);for(var b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];return a.apply(d,c)};b.isWrapper=!0;b.isInherited=!!a.isInherited;return b}for(var d in a)if(!A(d)){var b=a[d];p(b)&&(a[d]=c(b,a))}}function t(a){return function(){n&&(this.superClass=q);for(var d=arguments.length,b=Array(d),c=0;c<d;c++)b[c]=arguments[c];return this.superClass[a].apply(this,b)}}
a=p(a)?a:r;p(c)?(f=b,b=d,d=c,c="Class_"+ ++E):"string"==typeof c?p(d)||(f=b,b=d,d=r):"object"==typeof c?(f=b,b=c,d=r,c="Class_"+ ++E):h(c)||(c="Class_"+ ++E);if(!h(d))d=r;else if(!p(d))throw Error("classConstructor must be a Function");b=h(b)?b:I;f=h(f)?f:I;var v=a.prototype,n=!1,q,e=function(){if(!F){m(this);l(this);for(var a=arguments.length,c=Array(a),b=0;b<a;b++)c[b]=arguments[b];d.apply(this,c);l(this);return this}},w=e.toString().split("function"),w=w.shift()+"function "+c+w.join("function"),
w="(function(){return "+w+"})()";try{e=eval(w)}catch(O){throw Error("Could not eval class constructor function with source code: \n"+w);}u=h(u)?!!u:z;z&&u?(F=!0,e.prototype=new a,F=!1):y(v,e.prototype);if(a!=r)for(var x in b)A(x)||!p(b[x])||h(b[x])||(b[x]=t(x),b[x].isInherited=!0);y(b,e.prototype);y(a,e);y(f,e);e.superClass=e.prototype.superClass=a;e.className=e.prototype.className=c;e.extend=e.prototype.extend=function(a,b,c,d,f){return g.extend(e,a,b,c,d,f)};e.instanceOf=e.prototype.instanceOf=
function(a){if(e===a)return!0;if(e.superClass){if(e.superClass===a)return!0;if(p(e.superClass.instanceOf))return e.superClass.instanceOf(a)}return!1};D.push(e);return e};g.isClass=function(a){if(!h(a))return!1;for(var c=D.length;c--;)if(a===D[c])return!0;return!1};g.isClassInstanceOfClass=function(a,c){return h(a)&&h(c)&&g.isClass(a)&&g.isClass(c)?a.instanceOf(c):!1};var B=[],C=[],t=[],J="";g.define=function(a,c,d){J=a;var b=a.split("."),f=b.pop();if(""==f)throw Error("Hauts.Class.define must have className argument");
for(var g=b.length,h=q,m=0;m<g;m++){var l=b[m];""!=l&&(h[l]=h=h[l]||K(l))}C.push({defined:!1,classPath:a,targetPath:h,className:f,dependencies:c,handler:d});H()};g.resolve=function(a,c,d){p(a)&&(d=c,c=a,a=J);B.push({resolved:!1,classPath:a,handler:c,context:d});G()};N.Class=g})(this);