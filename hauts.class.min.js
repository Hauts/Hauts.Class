// Hauts.Class
// 21.10.2015
// Hauts
// https://github.com/Hauts/Hauts.Class
(function(k){function l(a){return"undefined"!=typeof a&&null!=a}function m(a){return"function"==typeof a}function t(a,e){for(var d in a)e[d]=a[d]}function w(a){return"superClass"==a||"extend"==a||"instanceOf"==a||"className"==a}function D(a){function e(a){a.superClass&&a.superClass!==q&&(d.push(a.superClass),e(a.superClass))}var d=[];e(a);d.reverse();d.push(a);return d}k.Hauts=k.Hauts||new function(){};k=k.Hauts;var B={},q=Object,u=!0,x=[],y=0,z=!1,h=function(a,e,d,b,f){return h.create(a,e,d,b,f)};
h.create=function(a,e,d,b,f){return h.extend(null,a,e,d,b,f)};h.useDeepMode=function(a){l(a)&&(u=!!a);return u};h.extend=function(a,e,d,b,f,k){function E(a,e,c){var d=!1,g=function(){if(!d){d=!0;var b=n;n=!0;var F=a.superClass;a.superClass=e.superClass.superClass;for(var f=arguments.length,h=Array(f),v=0;v<f;v++)h[v]=arguments[v];c.apply(a,h);a.superClass=F;b||(n=!1)}return g};g.className=c.className;return g}function G(a){function e(d,b,c){c=function(){var c=n;n=!0;var e=a.superClass;a.superClass=
b;for(var g=arguments.length,f=Array(g),h=0;h<g;h++)f[h]=arguments[h];g=d.apply(a,f);a.superClass=e;c||(n=!1);return g};c.isInherited=!!d.isInherited;return c}function c(a,d,g){for(var b in d)if(!w(b)){var f=d[b];m(f)&&(a[b]=e(f,g,b))}}for(var d=D(a),g=1,b=d.length,f=[];g<b;g++)f.push(E(a,d[g],d[g-1]));g=1;for(b=f.length;g<b;g++)f[g].superClass=f[g-1];for(g=b-1;0<=g;g--)c(f[g],d[g].prototype,f[g-1]);a.superClass=f[b-1]||new function(){};A=f[b-1]}function C(a){function d(a,b){if(a.isWrapper)return a;
var c=function(){n&&(b.superClass=A);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a.apply(b,d)};c.isWrapper=!0;c.isInherited=!!a.isInherited;return c}for(var b in a)if(!w(b)){var c=a[b];m(c)&&(a[b]=d(c,a))}}function H(a){return function(){n&&(this.superClass=A);for(var c=arguments.length,b=Array(c),d=0;d<c;d++)b[d]=arguments[d];return this.superClass[a].apply(this,b)}}a=m(a)?a:q;m(e)?(f=b,b=d,d=e,e="Class_"+ ++y):"string"==typeof e?m(d)||(f=b,b=d,d=q):"object"==typeof e?
(f=b,b=e,d=q,e="Class_"+ ++y):l(e)||(e="Class_"+ ++y);if(!l(d))d=q;else if(!m(d))throw Error("classConstructor must be a Function");b=l(b)?b:B;f=l(f)?f:B;var I=a.prototype,n=!1,A,c=function(){if(!z){G(this);C(this);for(var a=arguments.length,c=Array(a),b=0;b<a;b++)c[b]=arguments[b];d.apply(this,c);C(this);return this}},p=c.toString().split("function"),p=p.shift()+"function "+e+p.join("function"),p="(function(){return "+p+"})()";try{c=eval(p)}catch(J){throw Error("Could not eval class constructor function with source code: \n"+
p);}k=l(k)?!!k:u;u&&k?(z=!0,c.prototype=new a,z=!1):t(I,c.prototype);if(a!=q)for(var r in b)w(r)||!m(b[r])||l(b[r])||(b[r]=H(r),b[r].isInherited=!0);t(b,c.prototype);t(a,c);t(f,c);c.superClass=c.prototype.superClass=a;c.className=c.prototype.className=e;c.extend=c.prototype.extend=function(a,b,d,e,f){return h.extend(c,a,b,d,e,f)};c.instanceOf=c.prototype.instanceOf=function(a){if(c===a)return!0;if(c.superClass){if(c.superClass===a)return!0;if(m(c.superClass.instanceOf))return c.superClass.instanceOf(a)}return!1};
x.push(c);return c};h.isClass=function(a){if(!l(a))return!1;for(var e=x.length;e--;)if(a===x[e])return!0;return!1};h.isClassInstanceOfClass=function(a,e){return l(a)&&l(e)&&h.isClass(a)&&h.isClass(e)?a.instanceOf(e):!1};k.Class=h})(this);