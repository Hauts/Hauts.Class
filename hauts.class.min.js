// Hauts.Class
// 22.10.2015
// Hauts
// https://github.com/Hauts/Hauts.Class
(function(x){function k(a){return"undefined"!=typeof a&&null!=a}function m(a){return typeof a==q}function L(a){return eval("new function "+a+"(){}")}function A(a,b){for(var d in a)b[d]=a[d]}function C(a){return"superClass"==a||"extend"==a||"instanceOf"==a||"className"==a}function M(a){function b(a){a.superClass&&a.superClass!==r&&(d.push(a.superClass),b(a.superClass))}var d=[];b(a);d.reverse();d.push(a);return d}function G(){for(var a=0,b=u.length,d=z.length;a<b;a++)for(var c=u[a],g=c.classPath,t=
0;t<d;t++){var l=z[t];if(!l.resolved&&l.classPath==g){var f=l.handler,n=[c.result],k=l.context;m(f)&&f.apply(k,n);l.resolved=!0}}}function H(){for(var a=v.length,b=0;b<a;b++){var d=v[b];if(!d.defined){for(var c=0,g=d.dependencies,f=g.length,l=u.length,k=[],n=0;n<f;n++)for(var r=g[n],q=0;q<l;q++){var p=u[q];p.classPath==r&&(c++,k.push(p.result))}c==f&&(d.defined=!0,c=d,g=d.targetPath,f=d.className,l=d.handler,k=m(l)?l.apply(null,k):null,c.result=g[f]=k,u.push(d),G(),H())}}}x.Hauts=x.Hauts||new function(){};
var I=x.Hauts;if(!m(I.Class)){var q="function",J={},r=Object,B=!0,D=[],E=0,F=!1,f=function(a,b,d,c,g){return f.create(a,b,d,c,g)};f.create=function(a,b,d,c,g){return f.extend(null,a,b,d,c,g)};f.useDeepMode=function(a){k(a)&&(B=!!a);return B};f.extend=function(a,b,d,c,g,t){function l(a,b,d){var c=!1,h=function(){if(!c){c=!0;var e=p;p=!0;var g=a.superClass;a.superClass=b.superClass.superClass;for(var f=arguments.length,k=Array(f),l=0;l<f;l++)k[l]=arguments[l];d.apply(a,k);a.superClass=g;e||(p=!1)}return h};
h.className=d.className;return h}function u(a){function b(d,c,f){f=function(){var b=p;p=!0;var f=a.superClass;a.superClass=c;for(var e=arguments.length,h=Array(e),g=0;g<e;g++)h[g]=arguments[g];e=d.apply(a,h);a.superClass=f;b||(p=!1);return e};f.isInherited=!!d.isInherited;return f}function d(a,c,f){for(var e in c)if(!C(e)){var h=c[e];m(h)&&(a[e]=b(h,f,e))}}for(var c=M(a),h=1,e=c.length,f=[];h<e;h++)f.push(l(a,c[h],c[h-1]));h=1;for(e=f.length;h<e;h++)f[h].superClass=f[h-1];for(h=e-1;0<=h;h--)d(f[h],
c[h].prototype,f[h-1]);a.superClass=f[e-1]||new function(){};v=f[e-1]}function n(a){function d(a,b){if(a.isWrapper)return a;var c=function(){p&&(b.superClass=v);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a.apply(b,d)};c.isWrapper=!0;c.isInherited=!!a.isInherited;return c}for(var b in a)if(!C(b)){var c=a[b];m(c)&&(a[b]=d(c,a))}}function x(a){return function(){p&&(this.superClass=v);for(var c=arguments.length,b=Array(c),d=0;d<c;d++)b[d]=arguments[d];return this.superClass[a].apply(this,
b)}}a=m(a)?a:r;m(b)?(g=c,c=d,d=b,b="Class_"+ ++E):"string"==typeof b?m(d)||(g=c,c=d,d=r):"object"==typeof b?(g=c,c=b,d=r,b="Class_"+ ++E):k(b)||(b="Class_"+ ++E);if(!k(d))d=r;else if(!m(d))throw Error("classConstructor must be a Function");c=k(c)?c:J;g=k(g)?g:J;var z=a.prototype,p=!1,v,e=function(){if(!F){u(this);n(this);for(var a=arguments.length,c=Array(a),b=0;b<a;b++)c[b]=arguments[b];d.apply(this,c);n(this);return this}},w=e.toString().split(q),w=w.shift()+q+" "+b+w.join(q),w="("+q+"(){return "+
w+"})()";try{e=eval(w)}catch(N){throw Error("Could not eval class constructor function with source code: \n"+w);}t=k(t)?!!t:B;B&&t?(F=!0,e.prototype=new a,F=!1):A(z,e.prototype);if(a!=r)for(var y in c)C(y)||!m(c[y])||k(c[y])||(c[y]=x(y),c[y].isInherited=!0);A(c,e.prototype);A(a,e);A(g,e);e.superClass=e.prototype.superClass=a;e.className=e.prototype.className=b;e.extend=e.prototype.extend=function(a,b,c,d,g){return f.extend(e,a,b,c,d,g)};e.instanceOf=e.prototype.instanceOf=function(a){if(e===a)return!0;
if(e.superClass){if(e.superClass===a)return!0;if(m(e.superClass.instanceOf))return e.superClass.instanceOf(a)}return!1};D.push(e);return e};f.isClass=function(a){if(!k(a))return!1;for(var b=D.length;b--;)if(a===D[b])return!0;return!1};f.isClassInstanceOfClass=function(a,b){return k(a)&&k(b)&&f.isClass(a)&&f.isClass(b)?a.instanceOf(b):!1};var z=[],v=[],u=[],K="";f.define=function(a,b,d){K=a;var c=a.split("."),f=c.pop();if(""==f)throw Error("Hauts.Class.define must have className argument");for(var k=
c.length,l=x,m=0;m<k;m++){var n=c[m];""!=n&&(l[n]=l=l[n]||L(n))}v.push({defined:!1,classPath:a,targetPath:l,className:f,dependencies:b,handler:d});H()};f.resolve=function(a,b,d){m(a)&&(d=b,b=a,a=K);z.push({resolved:!1,classPath:a,handler:b,context:d});G()};I.Class=f}})(this);